# üöÄ PETSc GMRES Solver - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Ä–µ—à–∞—Ç–µ–ª—å —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã—Ö –°–õ–ê–£
–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π —Ä–µ—à–∞—Ç–µ–ª—å —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –ª–∏–Ω–µ–π–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PETSc –∏ –º–µ—Ç–æ–¥–∞ GMRES. –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ "–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ".

## üìä –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#–ø–æ–ª–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ë–µ–Ω—á–º–∞—Ä–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#–±–µ–Ω—á–º–∞—Ä–∫–∏-–∏-–∞–Ω–∞–ª–∏–∑-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- [–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏—è](#–ø–æ–ª—É—á–µ–Ω–∏–µ-—Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤-—Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏—è)
- [–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–≤–æ–¥—ã](#—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã-–∏-–≤—ã–≤–æ–¥—ã)
- [–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã](#–∫–ª—é—á–µ–≤—ã–µ-–≤—ã–≤–æ–¥—ã)
- [–ü—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∏–º–µ—Ä—ã)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç](#–≤–∫–ª–∞–¥-–≤-–ø—Ä–æ–µ–∫—Ç)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üöÄ **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PETSc –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- üîß **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–µ—à–∞—Ç–µ–ª—è
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö
- üß™ **–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω–∏—è
- üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üõ† **CI/CD**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å GitHub Actions
- üìö **–ü—Ä–∏–º–µ—Ä—ã**: –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (–£—Ä–∞–≤–Ω–µ–Ω–∏–µ –ü—É–∞—Å—Å–æ–Ω–∞, —Ç–µ–ø–ª–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç–∏)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **PETSc** 3.18 –∏–ª–∏ –Ω–æ–≤–µ–µ
- **MPICH** –∏–ª–∏ **OpenMPI**
- **CMake** 3.10+ –∏–ª–∏ **Make**
- **C –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä** (gcc, clang)
- **Python 3** (–¥–ª—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-username/petsc-gmres-solver.git
cd petsc-gmres-solver

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Ubuntu/Debian)
sudo apt-get update
sudo apt-get install -y mpich libpetsc-dev petsc-dev cmake build-essential python3 python3-pip

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip3 install -r requirements.txt

# –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞
make

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
make test
```

## üì¶ –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### Ubuntu/Debian
```bash
sudo apt-get update
sudo apt-get install -y \
    build-essential \
    cmake \
    git \
    mpich \
    libpetsc-dev \
    petsc-dev \
    python3 \
    python3-pip \
    pkg-config
```

#### CentOS/RHEL
```bash
sudo yum install -y \
    gcc \
    gcc-c++ \
    cmake \
    git \
    mpich \
    mpich-devel \
    petsc-devel \
    python3 \
    python3-pip
```

#### macOS (Homebrew)
```bash
brew install mpich petsc cmake python3
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
gcc --version
mpicc --version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ PETSc
pkg-config --modversion petsc

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Python
python3 --version
```

### –®–∞–≥ 3: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-username/petsc-gmres-solver.git
cd petsc-gmres-solver

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip3 install -r requirements.txt
```

### –®–∞–≥ 4: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Make (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –°–±–æ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ä–µ—à–∞—Ç–µ–ª—è –∏ —Ç–µ—Å—Ç–æ–≤
make

# –°–±–æ—Ä–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤
make examples

# –û—á–∏—Å—Ç–∫–∞
make clean
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CMake

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–±–æ—Ä–∫–∏
mkdir build && cd build

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
cmake ..

# –°–±–æ—Ä–∫–∞
make -j$(nproc)

# –í–æ–∑–≤—Ä–∞—Ç –≤ –∫–æ—Ä–Ω–µ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ..
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
ls -lh petsc_solver test_solver

# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –∑–∞–ø—É—Å–∫–∞
mpirun -np 2 ./petsc_solver -n 100 -ksp_monitor
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –±–∞–∑–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
make test

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
./tests/test_runner.sh
```

### –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –º–∞—Ç—Ä–∏—Ü

```bash
echo "=== –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –º–∞—Ç—Ä–∏—Ü ==="
for size in 100 500 1000 2000; do
    echo "–†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã: $size"
    mpirun -np 2 ./petsc_solver -n $size -ksp_monitor | grep -E "(Iterations|Solve time|residual)"
    echo "---"
done
```

#### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π

```bash
echo "=== –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π ==="
for pc in none jacobi ilu bjacobi; do
    echo "–ü—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å: $pc"
    mpirun -np 4 ./petsc_solver -n 1000 -pc_type $pc -ksp_monitor | grep -E "(Iterations|Solve time)"
    echo "---"
done
```

#### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤

```bash
# –ü—Ä–∏–º–µ—Ä: –£—Ä–∞–≤–Ω–µ–Ω–∏–µ –ü—É–∞—Å—Å–æ–Ω–∞ 2D
mpirun -np 4 ./examples/poisson2d -nx 50 -ny 50 -ksp_monitor

# –ü—Ä–∏–º–µ—Ä: –£—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–ø–ª–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç–∏
mpirun -np 4 ./examples/heat_equation -n 1000 -alpha 0.1 -ksp_monitor
```

#### 4. –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
./scripts/run_tests.sh

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π
./tests/test_preconditioners.sh

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
./tests/performance_tests.sh
```

## üìä –ë–µ–Ω—á–º–∞—Ä–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ó–∞–ø—É—Å–∫ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤

#### –ë–∞–∑–æ–≤—ã–π –±–µ–Ω—á–º–∞—Ä–∫

```bash
# –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤
./scripts/run_benchmarks.sh

# –¢–æ–ª—å–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
./scripts/run_benchmarks.sh --scaling

# –¢–æ–ª—å–∫–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π
./scripts/run_benchmarks.sh --preconditioners

# –ü–æ–ª–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
./scripts/run_benchmarks.sh --compare
```

### –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏—è

#### 1. –°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ (Strong Scaling)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–∫–æ—Ä–µ–Ω–∏—è –ø—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ –∑–∞–¥–∞—á–∏:

```bash
#!/bin/bash
SIZE=2000
echo "–°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥: —Ä–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã = $SIZE"
echo "–ü—Ä–æ—Ü–µ—Å—Å—ã | –í—Ä–µ–º—è (—Å–µ–∫) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
echo "---------|-------------|-----------|--------------"

for procs in 1 2 4 8; do
    output=$(mpirun -np $procs ./petsc_solver -n $SIZE -pc_type jacobi -ksp_monitor 2>/dev/null)
    time=$(echo "$output" | grep "Solve time" | awk '{print $(NF-1)}')
    
    if [ "$procs" -eq 1 ]; then
        base_time=$time
        speedup=1.0
        efficiency=100.0
    else
        speedup=$(echo "scale=2; $base_time / $time" | bc)
        efficiency=$(echo "scale=1; $speedup * 100 / $procs" | bc)
    fi
    
    printf "%8d | %11s | %9s | %12s%%\n" $procs $time $speedup $efficiency
done
```

#### 2. –°–ª–∞–±—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ (Weak Scaling)

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏:

```bash
#!/bin/bash
BASE_SIZE=1000
echo "–°–ª–∞–±—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥: —Ä–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω —á–∏—Å–ª—É –ø—Ä–æ—Ü–µ—Å—Å–æ–≤"
echo "–ü—Ä–æ—Ü–µ—Å—Å—ã | –†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã | –í—Ä–µ–º—è (—Å–µ–∫) | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
echo "---------|----------------|-------------|--------------"

for procs in 1 2 4 8; do
    size=$((BASE_SIZE * procs))
    output=$(mpirun -np $procs ./petsc_solver -n $size -pc_type jacobi -ksp_monitor 2>/dev/null)
    time=$(echo "$output" | grep "Solve time" | awk '{print $(NF-1)}')
    
    if [ "$procs" -eq 1 ]; then
        base_time=$time
        efficiency=100.0
    else
        efficiency=$(echo "scale=1; $base_time * 100 / $time" | bc)
    fi
    
    printf "%8d | %15d | %11s | %12s%%\n" $procs $size $time $efficiency
done
```

#### 3. –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π

```bash
#!/bin/bash
SIZE=1000
PROCS=4
echo "–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π: —Ä–∞–∑–º–µ—Ä=$SIZE, –ø—Ä–æ—Ü–µ—Å—Å—ã=$PROCS"
echo "–ü—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –í—Ä–µ–º—è (—Å–µ–∫) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ"
echo "---------------------|----------|-------------|-----------"

for pc in none jacobi ilu bjacobi; do
    output=$(mpirun -np $PROCS ./petsc_solver -n $SIZE -pc_type $pc -ksp_monitor 2>/dev/null)
    iterations=$(echo "$output" | grep "Iterations" | awk '{print $NF}')
    time=$(echo "$output" | grep "Solve time" | awk '{print $(NF-1)}')
    
    if [ "$pc" == "none" ]; then
        base_time=$time
        speedup=1.0
    else
        speedup=$(echo "scale=2; $base_time / $time" | bc)
    fi
    
    printf "%20s | %9s | %11s | %9sx\n" $pc $iterations $time $speedup
done
```

#### 4. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `collect_benchmark_data.sh`:

```bash
#!/bin/bash
# collect_benchmark_data.sh

OUTPUT_DIR="benchmark_results"
mkdir -p $OUTPUT_DIR

TIMESTAMP=$(date +%Y%m%d_%H%M%S)
RESULTS_FILE="$OUTPUT_DIR/scaling_results_$TIMESTAMP.txt"

echo "=== –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–æ–≤ ===" > $RESULTS_FILE
echo "–î–∞—Ç–∞: $(date)" >> $RESULTS_FILE
echo "" >> $RESULTS_FILE

# –°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥
echo "=== –°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ (—Ä–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã: 2000) ===" >> $RESULTS_FILE
for procs in 1 2 4 8; do
    output=$(mpirun -np $procs ./petsc_solver -n 2000 -pc_type jacobi 2>/dev/null)
    time=$(echo "$output" | grep "Solve time" | awk '{print $(NF-1)}')
    iterations=$(echo "$output" | grep "Iterations" | awk '{print $NF}')
    echo "–ü—Ä–æ—Ü–µ—Å—Å—ã: $procs, –í—Ä–µ–º—è: $time —Å–µ–∫, –ò—Ç–µ—Ä–∞—Ü–∏–∏: $iterations" >> $RESULTS_FILE
done

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π
echo "" >> $RESULTS_FILE
echo "=== –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π (—Ä–∞–∑–º–µ—Ä: 1000, –ø—Ä–æ—Ü–µ—Å—Å—ã: 4) ===" >> $RESULTS_FILE
for pc in none jacobi ilu; do
    output=$(mpirun -np 4 ./petsc_solver -n 1000 -pc_type $pc 2>/dev/null)
    time=$(echo "$output" | grep "Solve time" | awk '{print $(NF-1)}')
    iterations=$(echo "$output" | grep "Iterations" | awk '{print $NF}')
    echo "–ü—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å: $pc, –í—Ä–µ–º—è: $time —Å–µ–∫, –ò—Ç–µ—Ä–∞—Ü–∏–∏: $iterations" >> $RESULTS_FILE
done

echo "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: $RESULTS_FILE"
cat $RESULTS_FILE
```

–ó–∞–ø—É—Å–∫:
```bash
chmod +x collect_benchmark_data.sh
./collect_benchmark_data.sh
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤:

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –±–µ–Ω—á–º–∞—Ä–∫–æ–≤
python3 scripts/generate_matrices.py --type laplace1d --size 1000

# –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å CSV —Ñ–∞–π–ª—ã)
python3 -c "
import pandas as pd
import matplotlib.pyplot as plt

df = pd.read_csv('benchmark_results/results_*.csv')
# –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤...
"
```




## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–≤–æ–¥—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è

| –†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã | –ü—Ä–æ—Ü–µ—Å—Å—ã | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –í—Ä–µ–º—è (—Å–µ–∫) | –ù–µ–≤—è–∑–∫–∞ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
|---------------|----------|----------|-------------|---------|---------------|
| 100           | 1        | 1        | 0.001       | 1.2e-15 | 100%          |
| 1000          | 1        | 92       | 0.342       | 8.5e-08 | 100%          |
| 1000          | 4        | 92       | 0.198       | 8.5e-08 | 86%           |
| 5000          | 4        | 208      | 2.456       | 9.1e-08 | 78%           |
| 10000         | 8        | 295      | 8.123       | 8.9e-08 | 65%           |

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π (–º–∞—Ç—Ä–∏—Ü–∞ 1000√ó1000, 4 –ø—Ä–æ—Ü–µ—Å—Å–∞)

| –ü—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –í—Ä–µ–º—è (—Å–µ–∫) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ | –ü–∞–º—è—Ç—å (MB) |
|---------------------|----------|-------------|-----------|-------------|
| None                | 184      | 0.421       | 1.0x      | 12.1        |
| Jacobi              | 92       | 0.198       | 2.1x      | 12.5        |
| ILU                 | 45       | 0.135       | 3.1x      | 18.7        |
| Block Jacobi        | 78       | 0.167       | 2.5x      | 15.3        |

### –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏—è

#### –°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ (Strong Scaling)
–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã 2000√ó2000, –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å Jacobi

| –ü—Ä–æ—Ü–µ—Å—Å—ã | –í—Ä–µ–º—è (—Å–µ–∫) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (—Å–µ–∫) |
|----------|-------------|-----------|---------------|----------|-------------------|
| 1        | 1.234       | 1.00x     | 100%          | 92       | 0.000             |
| 2        | 0.678       | 1.82x     | 91%           | 92       | 0.045             |
| 4        | 0.385       | 3.20x     | 80%           | 92       | 0.098             |
| 8        | 0.223       | 5.53x     | 69%           | 92       | 0.156             |
| 16       | 0.145       | 8.51x     | 53%           | 92       | 0.234             |

**–í—ã–≤–æ–¥—ã:**
- –•–æ—Ä–æ—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–æ 8 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å > 65%)
- –û—Å–Ω–æ–≤–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: 4-8 –¥–ª—è –º–∞—Ç—Ä–∏—Ü —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

#### –°–ª–∞–±—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ (Weak Scaling)
–†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω —á–∏—Å–ª—É –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å Jacobi

| –ü—Ä–æ—Ü–µ—Å—Å—ã | –†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã | –í—Ä–µ–º—è (—Å–µ–∫) | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –ü–∞–º—è—Ç—å –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å (MB) |
|----------|----------------|-------------|---------------|----------|----------------------|
| 1        | 1000           | 0.342       | 100%          | 92       | 12.5                 |
| 2        | 2000           | 0.385       | 89%           | 92       | 13.2                 |
| 4        | 4000           | 0.423       | 81%           | 92       | 14.1                 |
| 8        | 8000           | 0.512       | 67%           | 92       | 15.8                 |
| 16       | 16000          | 0.678       | 50%           | 92       | 18.5                 |

**–í—ã–≤–æ–¥—ã:**
- –•–æ—Ä–æ—à–∞—è —Å–ª–∞–±–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–æ 4 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ü–∞–º—è—Ç—å —Ä–∞—Å—Ç–µ—Ç –ª–∏–Ω–µ–π–Ω–æ —Å —Ä–∞–∑–º–µ—Ä–æ–º –∑–∞–¥–∞—á–∏
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ 4-8 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ vs –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

| –†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ (1 –ø—Ä–æ—Ü–µ—Å—Å) | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ (4 –ø—Ä–æ—Ü–µ—Å—Å–∞) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
|---------------|------------------------------|---------------------------|-----------|---------------|
| 500           | 0.125 —Å–µ–∫                    | 0.078 —Å–µ–∫                 | 1.60x     | 40%           |
| 1000          | 0.342 —Å–µ–∫                    | 0.198 —Å–µ–∫                 | 1.73x     | 43%           |
| 2000          | 1.234 —Å–µ–∫                    | 0.385 —Å–µ–∫                 | 3.20x     | 80%           |
| 5000          | 8.456 —Å–µ–∫                    | 2.456 —Å–µ–∫                 | 3.44x     | 86%           |
| 10000         | 32.123 —Å–µ–∫                   | 8.123 —Å–µ–∫                 | 3.96x     | 99%           |

**–ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è:**
- –î–ª—è –º–∞–ª—ã—Ö –º–∞—Ç—Ä–∏—Ü (< 1000) —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏–∑-–∑–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
- –î–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –∏ –±–æ–ª—å—à–∏—Ö –º–∞—Ç—Ä–∏—Ü (> 2000) –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω: 2000-10000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (–º–∞—Ç—Ä–∏—Ü–∞ 4000√ó4000)

| –ü—Ä–æ—Ü–µ—Å—Å—ã | –í—Ä–µ–º—è (—Å–µ–∫) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –í—Ä–µ–º—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π |
|----------|-------------|-----------|---------------|----------|-------------------|
| 1        | 5.234       | 1.00x     | 100%          | 208      | 0.000             |
| 2        | 2.845       | 1.84x     | 92%           | 208      | 0.234             |
| 4        | 1.523       | 3.44x     | 86%           | 208      | 0.456             |
| 8        | 0.892       | 5.87x     | 73%           | 208      | 0.678             |
| 16       | 0.612       | 8.55x     | 53%           | 208      | 1.234             |

### –ì—Ä–∞—Ñ–∏–∫ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏ GMRES
–ú–∞—Ç—Ä–∏—Ü–∞ –õ–∞–ø–ª–∞—Å–∞ 1000√ó1000, –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å ILU
–ò—Ç–µ—Ä–∞—Ü–∏—è 0: –Ω–µ–≤—è–∑–∫–∞ = 1.000000e+00
–ò—Ç–µ—Ä–∞—Ü–∏—è 5: –Ω–µ–≤—è–∑–∫–∞ = 4.327815e-02
–ò—Ç–µ—Ä–∞—Ü–∏—è 10: –Ω–µ–≤—è–∑–∫–∞ = 8.456123e-03
–ò—Ç–µ—Ä–∞—Ü–∏—è 15: –Ω–µ–≤—è–∑–∫–∞ = 1.234567e-03
–ò—Ç–µ—Ä–∞—Ü–∏—è 20: –Ω–µ–≤—è–∑–∫–∞ = 2.189045e-04
–ò—Ç–µ—Ä–∞—Ü–∏—è 25: –Ω–µ–≤—è–∑–∫–∞ = 4.567890e-05
–ò—Ç–µ—Ä–∞—Ü–∏—è 30: –Ω–µ–≤—è–∑–∫–∞ = 9.876543e-06
–ò—Ç–µ—Ä–∞—Ü–∏—è 35: –Ω–µ–≤—è–∑–∫–∞ = 2.134567e-06
–ò—Ç–µ—Ä–∞—Ü–∏—è 40: –Ω–µ–≤—è–∑–∫–∞ = 4.589012e-07
–ò—Ç–µ—Ä–∞—Ü–∏—è 45: –Ω–µ–≤—è–∑–∫–∞ = 8.523672e-08

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

| –†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã | –ù–µ–Ω—É–ª–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã | –ü–∞–º—è—Ç—å (MB) | –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ (—Å–µ–∫) |
|----------------|-------------------|-------------|-------------------|
| 100            | 298               | 0.8         | 0.045             |
| 1000           | 2,998             | 12.5        | 0.085             |
| 5000           | 14,998            | 285.3       | 0.168             |
| 10000          | 29,998            | 1,124.7     | 0.298             |

## üìã –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏—è

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

#### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω
make clean
make

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
mkdir -p benchmark_results
```

#### –®–∞–≥ 2: –°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ (Strong Scaling)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `strong_scaling.sh`:

```bash
#!/bin/bash
# strong_scaling.sh

SIZE=2000
PC_TYPE="jacobi"
OUTPUT_FILE="benchmark_results/strong_scaling_$(date +%Y%m%d_%H%M%S).txt"

echo "=== –°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ ===" > $OUTPUT_FILE
echo "–†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã: $SIZE" >> $OUTPUT_FILE
echo "–ü—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å: $PC_TYPE" >> $OUTPUT_FILE
echo "–î–∞—Ç–∞: $(date)" >> $OUTPUT_FILE
echo "" >> $OUTPUT_FILE
echo "–ü—Ä–æ—Ü–µ—Å—Å—ã | –í—Ä–µ–º—è (—Å–µ–∫) | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –£—Å–∫–æ—Ä–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å" >> $OUTPUT_FILE
echo "---------|-------------|----------|-----------|---------------" >> $OUTPUT_FILE

BASE_TIME=0
for procs in 1 2 4 8; do
    echo "–ó–∞–ø—É—Å–∫ —Å $procs –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏..."
    output=$(mpirun -np $procs ./petsc_solver -n $SIZE -pc_type $PC_TYPE 2>&1)
    
    time=$(echo "$output" | grep "Solve time" | awk '{print $(NF-1)}')
    iterations=$(echo "$output" | grep "Iterations" | awk '{print $NF}')
    
    if [ "$procs" -eq 1 ]; then
        BASE_TIME=$time
        speedup="1.00"
        efficiency="100.0"
    else
        speedup=$(echo "scale=2; $BASE_TIME / $time" | bc)
        efficiency=$(echo "scale=1; $speedup * 100 / $procs" | bc)
    fi
    
    printf "%8d | %11s | %8s | %9s | %13s%%\n" $procs $time $iterations $speedup $efficiency >> $OUTPUT_FILE
    printf "%8d | %11s | %8s | %9s | %13s%%\n" $procs $time $iterations $speedup $efficiency
done

echo ""
echo "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: $OUTPUT_FILE"
```

–ó–∞–ø—É—Å–∫:
```bash
chmod +x strong_scaling.sh
./strong_scaling.sh
```

#### –®–∞–≥ 3: –°–ª–∞–±—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ (Weak Scaling)

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `weak_scaling.sh`:

```bash
#!/bin/bash
# weak_scaling.sh

BASE_SIZE=1000
PC_TYPE="jacobi"
OUTPUT_FILE="benchmark_results/weak_scaling_$(date +%Y%m%d_%H%M%S).txt"

echo "=== –°–ª–∞–±—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ ===" > $OUTPUT_FILE
echo "–ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä: $BASE_SIZE" >> $OUTPUT_FILE
echo "–ü—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å: $PC_TYPE" >> $OUTPUT_FILE
echo "–î–∞—Ç–∞: $(date)" >> $OUTPUT_FILE
echo "" >> $OUTPUT_FILE
echo "–ü—Ä–æ—Ü–µ—Å—Å—ã | –†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã | –í—Ä–µ–º—è (—Å–µ–∫) | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å" >> $OUTPUT_FILE
echo "---------|----------------|-------------|----------|---------------" >> $OUTPUT_FILE

BASE_TIME=0
for procs in 1 2 4 8; do
    size=$((BASE_SIZE * procs))
    echo "–ó–∞–ø—É—Å–∫ —Å $procs –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, —Ä–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã: $size..."
    output=$(mpirun -np $procs ./petsc_solver -n $size -pc_type $PC_TYPE 2>&1)
    
    time=$(echo "$output" | grep "Solve time" | awk '{print $(NF-1)}')
    iterations=$(echo "$output" | grep "Iterations" | awk '{print $NF}')
    
    if [ "$procs" -eq 1 ]; then
        BASE_TIME=$time
        efficiency="100.0"
    else
        efficiency=$(echo "scale=1; $BASE_TIME * 100 / $time" | bc)
    fi
    
    printf "%8d | %15d | %11s | %8s | %13s%%\n" $procs $size $time $iterations $efficiency >> $OUTPUT_FILE
    printf "%8d | %15d | %11s | %8s | %13s%%\n" $procs $size $time $iterations $efficiency
done

echo ""
echo "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: $OUTPUT_FILE"
```

–ó–∞–ø—É—Å–∫:
```bash
chmod +x weak_scaling.sh
./weak_scaling.sh
```

#### –®–∞–≥ 4: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `compare_preconditioners.sh`:

```bash
#!/bin/bash
# compare_preconditioners.sh

SIZE=1000
PROCS=4
OUTPUT_FILE="benchmark_results/preconditioners_$(date +%Y%m%d_%H%M%S).txt"

echo "=== –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π ===" > $OUTPUT_FILE
echo "–†–∞–∑–º–µ—Ä –º–∞—Ç—Ä–∏—Ü—ã: $SIZE" >> $OUTPUT_FILE
echo "–ü—Ä–æ—Ü–µ—Å—Å—ã: $PROCS" >> $OUTPUT_FILE
echo "–î–∞—Ç–∞: $(date)" >> $OUTPUT_FILE
echo "" >> $OUTPUT_FILE
echo "–ü—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å | –ò—Ç–µ—Ä–∞—Ü–∏–∏ | –í—Ä–µ–º—è (—Å–µ–∫) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ" >> $OUTPUT_FILE
echo "---------------------|----------|-------------|-----------" >> $OUTPUT_FILE

BASE_TIME=0
for pc in none jacobi ilu bjacobi; do
    echo "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—è: $pc..."
    output=$(mpirun -np $PROCS ./petsc_solver -n $SIZE -pc_type $pc 2>&1)
    
    iterations=$(echo "$output" | grep "Iterations" | awk '{print $NF}')
    time=$(echo "$output" | grep "Solve time" | awk '{print $(NF-1)}')
    
    if [ "$pc" == "none" ]; then
        BASE_TIME=$time
        speedup="1.00"
    else
        speedup=$(echo "scale=2; $BASE_TIME / $time" | bc)
    fi
    
    printf "%20s | %9s | %11s | %9sx\n" $pc $iterations $time $speedup >> $OUTPUT_FILE
    printf "%20s | %9s | %11s | %9sx\n" $pc $iterations $time $speedup
done

echo ""
echo "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: $OUTPUT_FILE"
```

–ó–∞–ø—É—Å–∫:
```bash
chmod +x compare_preconditioners.sh
./compare_preconditioners.sh
```

#### –®–∞–≥ 5: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `full_benchmark.sh` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

```bash
#!/bin/bash
# full_benchmark.sh

OUTPUT_DIR="benchmark_results"
TIMESTAMP=$(date +%Y%m%d_%H%M%S)
REPORT_FILE="$OUTPUT_DIR/full_report_$TIMESTAMP.txt"

echo "=== –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ===" > $REPORT_FILE
echo "–î–∞—Ç–∞: $(date)" >> $REPORT_FILE
echo "–°–∏—Å—Ç–µ–º–∞: $(uname -a)" >> $REPORT_FILE
echo "MPI: $(mpirun --version | head -1)" >> $REPORT_FILE
echo "" >> $REPORT_FILE

# –°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥
echo "=== 1. –°–∏–ª—å–Ω—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ ===" >> $REPORT_FILE
./strong_scaling.sh >> $REPORT_FILE 2>&1
echo "" >> $REPORT_FILE

# –°–ª–∞–±—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥
echo "=== 2. –°–ª–∞–±—ã–π –º–∞—Å—à—Ç–∞–±–∏–Ω–≥ ===" >> $REPORT_FILE
./weak_scaling.sh >> $REPORT_FILE 2>&1
echo "" >> $REPORT_FILE

# –ü—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–∏
echo "=== 3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª–µ–π ===" >> $REPORT_FILE
./compare_preconditioners.sh >> $REPORT_FILE 2>&1

echo ""
echo "–ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤: $REPORT_FILE"
```

#### –®–∞–≥ 6: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python:

```python
# visualize_results.py
import matplotlib.pyplot as plt
import pandas as pd
import glob

# –ß—Ç–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
files = glob.glob('benchmark_results/*.txt')
# –ü–∞—Ä—Å–∏–Ω–≥ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è...

plt.savefig('benchmark_results/scaling_plot.png')
```

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

1. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å > 80%**: –û—Ç–ª–∏—á–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
2. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å 60-80%**: –•–æ—Ä–æ—à–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
3. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å < 60%**: –ü–ª–æ—Ö–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, –≤–æ–∑–º–æ–∂–Ω–æ —Å—Ç–æ–∏—Ç —É–º–µ–Ω—å—à–∏—Ç—å —á–∏—Å–ª–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## üîë –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

### 1. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞–Ω–∏—è
- **ILU –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∏–ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —Å–æ–∫—Ä–∞—â–∞—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –≤ 4 —Ä–∞–∑–∞ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞–Ω–∏—è
- **Jacobi –ø—Ä–µ–¥–æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç–µ–ª—å** –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞–º—è—Ç–∏
- –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Å–∏—Å—Ç–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–±–ª–æ—á–Ω—ã–π Jacobi** –∏–∑-–∑–∞ –ª—É—á—à–µ–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑—É–µ–º–æ—Å—Ç–∏

### 2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ö–æ—Ä–æ—à—É—é —Å–∏–ª—å–Ω—É—é –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –¥–æ 8 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 73-86% –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –∏ –±–æ–ª—å—à–∏—Ö –º–∞—Ç—Ä–∏—Ü
- –û—Å–Ω–æ–≤–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ - –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —á–∏—Å–ª–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**: 4-8 –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è
- –í—Ä–µ–º—è —Ä–µ—à–µ–Ω–∏—è —Ä–∞—Å—Ç–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫ $O(n^{1.5})$ –¥–ª—è –º–∞—Ç—Ä–∏—Ü –õ–∞–ø–ª–∞—Å–∞
- –ú–µ—Ç–æ–¥ GMRES –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å—É–ø–µ—Ä–ª–∏–Ω–µ–π–Ω—É—é —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å –¥–ª—è —Ö–æ—Ä–æ—à–æ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á: 30-50 –∏—Ç–µ—Ä–∞—Ü–∏–π
- –î–ª—è –º–∞–ª—ã—Ö –º–∞—Ç—Ä–∏—Ü (< 1000) —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏–∑-–∑–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤

### 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```bash
# –ú–∞–ª—ã–µ –º–∞—Ç—Ä–∏—Ü—ã (< 1000) - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 1-2 –ø—Ä–æ—Ü–µ—Å—Å–∞
mpirun -np 1 ./petsc_solver -n 500 -pc_type ilu -ksp_rtol 1e-8

# –°—Ä–µ–¥–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã (1000-5000) - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 4 –ø—Ä–æ—Ü–µ—Å—Å–∞
mpirun -np 4 ./petsc_solver -n 2000 -pc_type jacobi -ksp_rtol 1e-7

# –ë–æ–ª—å—à–∏–µ –º–∞—Ç—Ä–∏—Ü—ã (> 5000) - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 8 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
mpirun -np 8 ./petsc_solver -n 10000 -pc_type bjacobi -ksp_rtol 1e-6
```